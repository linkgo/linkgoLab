!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=React.createClass({displayName:"WeahterStation",fetchDataTemp:function(a,b,c){var d="/data";$.post(d,{dataKey:a,count:b},c.bind(this))},createChart:function(a,b,c){var e=document.getElementById(a).getContext("2d"),f={labels:b,datasets:[{fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:c}]},g=new Chart(e).Line(f,{animationSteps:15});this.setState(d({},a,g))},initChart:function(){this.fetchDataTemp("office",20,function(a,b){if(a.success){var c={ts:[],temp:[],humi:[],pres:[],light:[]};a.data.reverse().map(function(a,b){var d=JSON.parse(a);c.ts.push(moment(d.ts).format("h:mm:ss")),c.temp.push(Number(d.temp)),c.humi.push(Number(d.humi)),c.pres.push(Number(d.pres)),c.light.push(Number(d.light))}),this.createChart("tempChart",c.ts,c.temp),this.createChart("humiChart",c.ts,c.humi),this.createChart("lightChart",c.ts,c.light),this.createChart("presChart",c.ts,c.pres)}else console.error(url,b,err.toString())})},updateChart:function(){this.fetchDataTemp("office",1,function(a,b){if(a.success){var c=JSON.parse(a.data[0]);this.setState({data:c}),this.state.tempChart.addData([Number(c.temp)],moment(c.ts).format("h:mm:ss")),this.state.tempChart.removeData(),this.state.humiChart.addData([Number(c.humi)],moment(c.ts).format("h:mm:ss")),this.state.humiChart.removeData(),this.state.lightChart.addData([Number(c.light)],moment(c.ts).format("h:mm:ss")),this.state.lightChart.removeData(),this.state.presChart.addData([Number(c.pres)],moment(c.ts).format("h:mm:ss")),this.state.presChart.removeData()}else console.error(url,b,err.toString())})},getInitialState:function(){return{data:{}}},componentDidMount:function(){setTimeout(this.initChart,200),setInterval(this.updateChart,5e3)},render:function(){return React.createElement("div",{className:"section content"},React.createElement("div",{className:"row",style:{visibility:"hidden"}},React.createElement("p",null,JSON.stringify(this.state.data))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},React.createElement(f,{bgColor:"bg-aqua",icon:"ion ion-thermometer",infoName:"Temperature",infoStr:this.state.data.temp,infoStrSuffix:" â„ƒ"})),React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},React.createElement(f,{bgColor:"bg-green",icon:"ion ion-waterdrop",infoName:"Humidity",infoStr:this.state.data.humi,infoStrSuffix:" %"})),React.createElement("div",{className:"clearfix visible-sm-block"}),React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},React.createElement(f,{bgColor:"bg-maroon",icon:"fa fa-sun-o",infoName:"Light",infoStr:this.state.data.light,infoStrSuffix:" lux"})),React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},React.createElement(f,{bgColor:"bg-yellow",icon:"fa fa-rocket",infoName:"Pressure",infoStr:this.state.data.pres,infoStrSuffix:" hPa"}))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(g,{chartTitle:"Temperature",canvasId:"tempChart"})),React.createElement("div",{className:"col-md-6"},React.createElement(g,{chartTitle:"Humidity",canvasId:"humiChart"})),React.createElement("div",{className:"col-md-6"},React.createElement(g,{chartTitle:"Light",canvasId:"lightChart"})),React.createElement("div",{className:"col-md-6"},React.createElement(g,{chartTitle:"Pressure",canvasId:"presChart"}))))}}),f=React.createClass({displayName:"InfoBox",render:function(){return React.createElement("div",{className:"info-box"},React.createElement("span",{className:"info-box-icon "+this.props.bgColor},React.createElement("i",{className:this.props.icon})),React.createElement("div",{className:"info-box-content"},React.createElement("span",{className:"info-box-text"},this.props.infoName),React.createElement("span",{className:"info-box-number"},this.props.infoStr,React.createElement("small",null,this.props.infoStrSuffix))))}}),g=React.createClass({displayName:"ChartBox",render:function(){return React.createElement("div",{className:"box"},React.createElement("div",{className:"box-header with-border"},React.createElement("h3",{className:"box-title"},"History Report"),React.createElement("div",{className:"box-tools pull-right"},React.createElement("button",{type:"button",className:"btn btn-box-tool","data-widget":"collapse"},React.createElement("i",{className:"fa fa-minus"})))),React.createElement("div",{className:"box-body"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("p",{className:"text-center"},React.createElement("strong",null,this.props.chartTitle)),React.createElement("div",{className:"chart"},React.createElement("canvas",{id:this.props.canvasId,style:{height:"180px"}}))))))}});ReactDOM.render(React.createElement(e,null),document.getElementById("weatherStation"))},{}]},{},[1]);
//# sourceMappingURL=weatherStation.min.js.map