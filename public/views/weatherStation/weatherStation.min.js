!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=React.createClass({displayName:"WeahterStation",fetchData:function(a,b,c,d){var e="/data";$.post(e,{dataKey:a,location:b,count:c},d.bind(this))},createChart:function(a,b){var c=document.getElementById("tempChart").getContext("2d"),d={labels:a,datasets:[{fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:b}]},e=new Chart(c).Line(d,{animationSteps:15});this.setState({tempChart:e})},initChart:function(a){this.fetchData("weather",a,6,function(a,b){if(a.success){var c=[],d=[];a.data.map(function(a,b){var e=JSON.parse(a);d.push(Number(e.TEMP_NOW)),c.push(e.ts)}),console.log(c,d),this.createChart(c,d)}else console.error(url,b,err.toString())})},updateChart:function(a){this.fetchData("weather",a,1,function(a,b){if(a.success){var c=JSON.parse(a.data[0]);console.log(Number(c.TEMP_NOW),c.ts),this.setState({data:c}),this.state.tempChart.addData([Number(c.TEMP_NOW)],c.ts),this.state.tempChart.removeData()}else console.error(url,b,err.toString())})},getInitialState:function(){return{data:{}}},componentDidMount:function(){setTimeout(this.initChart,200,"Shanghai"),setInterval(this.updateChart,5e3,"Shanghai")},render:function(){return React.createElement("div",{className:"section content"},React.createElement("div",{className:"row"},React.createElement("p",null,JSON.stringify(this.state.data))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},React.createElement(e,{bgColor:"bg-aqua",icon:"ion ion-ios-gear-outline",infoName:"CPU Traffic",infoStr:"90",infoStrSuffix:"%"})),React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"}),React.createElement("div",{className:"clearfix visible-sm-block"}),React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"}),React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"})),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(f,null))))}}),e=React.createClass({displayName:"InfoBox",render:function(){return React.createElement("div",{className:"info-box"},React.createElement("span",{className:"info-box-icon "+this.props.bgColor},React.createElement("i",{className:this.props.icon})),React.createElement("div",{className:"info-box-content"},React.createElement("span",{className:"info-box-text"},this.props.infoName),React.createElement("span",{className:"info-box-number"},this.props.infoStr,React.createElement("small",null,this.props.infoStrSuffix))))}}),f=React.createClass({displayName:"ChartBox",render:function(){return React.createElement("div",{className:"box"},React.createElement("div",{className:"box-header with-border"},React.createElement("h3",{className:"box-title"},"History Report"),React.createElement("div",{className:"box-tools pull-right"},React.createElement("button",{type:"button",className:"btn btn-box-tool","data-widget":"collapse"},React.createElement("i",{className:"fa fa-minus"})))),React.createElement("div",{className:"box-body"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-8"},React.createElement("p",{className:"text-center"},React.createElement("strong",null,"Temperature")),React.createElement("div",{className:"chart"},React.createElement("canvas",{id:"tempChart",style:{height:"180px"}}))))))}});ReactDOM.render(React.createElement(d,{pollInterval:1e3}),document.getElementById("weatherStation"))},{}]},{},[1]);
//# sourceMappingURL=weatherStation.min.js.map