!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=React.createClass({displayName:"WeahterStation",fetchDataTemp:function(a,b,c){var d="/data";$.post(d,{dataKey:a,count:b},c.bind(this))},createChart:function(a,b,c,d){$([a]).highcharts({chart:{type:"spline",animation:Highcharts.svg,marginRight:10},title:{text:c},xAxis:{type:"datetime"},yAxis:{title:{text:d},plotLines:[{value:0,width:1,color:"#808080"}]},legend:{enabled:!1},exporting:{enabled:!1},series:[{id:a,name:"tempreature",data:b}]})},initChart:function(){this.fetchDataTemp("office",10,function(a,b){if(a.success){var c,d=[],e=[],f=[],g=[];a.data.reverse().map(function(a,b){var h=JSON.parse(a);c=h.ts,d.push({x:c,y:Number(h.temp)}),e.push({x:c,y:Number(h.humi)}),f.push({x:c,y:Number(h.light)}),g.push({x:c,y:Number(h.pres)})}),this.ts=c,this.createChart("tempChart",d,"","℃"),this.tempChart=$("#tempChart").highcharts(),this.createChart("humiChart",e,"","%"),this.humiChart=$("#humiChart").highcharts(),this.createChart("lightChart",f,"","lux"),this.lightChart=$("#lightChart").highcharts(),this.createChart("presChart",g,"","hPa"),this.presChart=$("#presChart").highcharts()}else console.error(url,b,err.toString())})},updateChart:function(){this.fetchDataTemp("office",1,function(a,b){if(a.success){var c=JSON.parse(a.data[0]);this.setState({data:c}),c.ts==this.ts?console.log("skip same data"):(this.ts=c.ts,console.log(moment(c.ts).format("h:mm:ss"),Number(c.temp)),this.tempChart.get("tempChart").addPoint([c.ts,Number(c.temp)],!0,!0),this.humiChart.get("humiChart").addPoint([c.ts,Number(c.humi)],!0,!0),this.lightChart.get("lightChart").addPoint([c.ts,Number(c.light)],!0,!0),this.presChart.get("presChart").addPoint([c.ts,Number(c.pres)],!0,!0))}else console.error(url,b,err.toString())})},getInitialState:function(){return{tempChart:{},humiChart:{},data:{}}},componentDidMount:function(){setTimeout(this.initChart,200),setInterval(this.updateChart,5e3)},render:function(){return React.createElement("div",{className:"section content"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},React.createElement(e,{bgColor:"bg-aqua",icon:"ion ion-thermometer",infoName:"Temperature",infoStr:this.state.data.temp,infoStrSuffix:" ℃"})),React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},React.createElement(e,{bgColor:"bg-green",icon:"ion ion-waterdrop",infoName:"Humidity",infoStr:this.state.data.humi,infoStrSuffix:" %"})),React.createElement("div",{className:"clearfix visible-sm-block"}),React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},React.createElement(e,{bgColor:"bg-maroon",icon:"fa fa-sun-o",infoName:"Light",infoStr:this.state.data.light,infoStrSuffix:" lux"})),React.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},React.createElement(e,{bgColor:"bg-yellow",icon:"fa fa-rocket",infoName:"Pressure",infoStr:this.state.data.pres,infoStrSuffix:" hPa"}))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(f,{chartTitle:"Temperature",canvasId:"tempChart"})),React.createElement("div",{className:"col-md-6"},React.createElement(f,{chartTitle:"Humidity",canvasId:"humiChart"})),React.createElement("div",{className:"col-md-6"},React.createElement(f,{chartTitle:"Light",canvasId:"lightChart"})),React.createElement("div",{className:"col-md-6"},React.createElement(f,{chartTitle:"Pressure",canvasId:"presChart"}))))}}),e=React.createClass({displayName:"InfoBox",render:function(){return React.createElement("div",{className:"info-box"},React.createElement("span",{className:"info-box-icon "+this.props.bgColor},React.createElement("i",{className:this.props.icon})),React.createElement("div",{className:"info-box-content"},React.createElement("span",{className:"info-box-text"},this.props.infoName),React.createElement("span",{className:"info-box-number"},this.props.infoStr,React.createElement("small",null,this.props.infoStrSuffix))))}}),f=React.createClass({displayName:"ChartBox",render:function(){return React.createElement("div",{className:"box"},React.createElement("div",{className:"box-header with-border"},React.createElement("h3",{className:"box-title"},"History Report"),React.createElement("div",{className:"box-tools pull-right"},React.createElement("button",{type:"button",className:"btn btn-box-tool","data-widget":"collapse"},React.createElement("i",{className:"fa fa-minus"})))),React.createElement("div",{className:"box-body"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("p",{className:"text-center"},React.createElement("strong",null,this.props.chartTitle)),React.createElement("div",{className:"chart"},React.createElement("div",{id:this.props.canvasId,style:{height:"180px"}}))))))}});ReactDOM.render(React.createElement(d,null),document.getElementById("weatherStation"))},{}]},{},[1]);
//# sourceMappingURL=weatherStation.min.js.map